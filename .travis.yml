language: node_js
sudo: required
node_js:
- '6.10'
- '7.7'
cache:
  edge: true
  directories:
  - $(npm root -g)
  - node_modules
  - deep_modules
  - $(npm config get prefix)/bin
branches:
  only:
  - master
  - dev
  - stage
  - test
before_install:
- cp bin/test/package.json .
after_success:
- npm run coverage
after_script:
- npm run remove-coverage
env:
  global:
  - MAJOR_VERSIONS=master
  - DEEP_NO_INTERACTION=1
  - E2E_TESTING=none
  # GITHUB_OAUTH_TOKEN=[secure]
  - secure: "Xz3PXjwfejFnNonzzgJfzGTgVQeWG8sb0/XMVpqPnyYo5orC3ZX5jcpM4+O4UjVazRRcQ1WQSi5wysgZT3mVWFGXBQ01bvGhVXqpjYswRRi69yGpponJWUW7zWtWClW4bdcF+/ts2ejtsNYRUjA3gzOnWti3qLlF7OjovL/PWjDagr1o6P5cu2L046K/XvDZp86t1FWn/wgDwHyOsYFHC7AhjljGJtA6KvXVpnclPbvTHJT1HGpdMv8OYaZhCCuMBaRAdVFUbZ9jg6cZQlPfc+CdjXggXFa71BwWFiU6kBsvdVqWInkVRWevz4mp0F/cd9eG4Nyyi4fCd+l4CpZIAleJSoNtvhqDoP702MBtmLdm+E2wcRr6D7+gm2e2qlt1HYbbiGTbf79QtdfL3Pkxs25km4soSrrcny1tsiX37y4LL+GsAoLfn2AcgjThqWp5xgsrpd4cyBxdKORoGY3hPyhrD7TQ+WMpQLw4feMwAdIaScl5vpF76V0egvdPSIhQ7oRWrJoOFmBH0VT0aEQCA/HILhJJ9YVDvG2MFjzphR0JyxV+gHg3/XbEKmI2Og6rDT2hA0/S2hNU2cVKhx4n5vWJCOxewQijh00WSVFIDSWT6hjmy74eps3hVMcrckt4ThYfVEtowLJqkARZFGxHinUSvBpSKfYBr52xozjtZGQ="
  # CODECLIMATE_REPO_TOKEN_MASTER=[secure]
  - secure: "rlQJxVn/ckgMICKNQ227/k9VDiuLKevPbEEruPG5BmXafEgOKMNNDJ/7BVzJ6TI+6YMVXGFjOqHDbBJzw8kHyb+pze49NFqqRXqmGRVaWMq+BZ58QR7+ilJyRNa9lO/NxNc77Y3iNLoa19hNtxCCjKCpcytYq3nDQA+tNn0zKC2QY6Njrvjptna9KEYHz/fj41RVVsbTzs7dnfa6Q4GSp1+Ti3IWkKxBiMY96EbNRO5wv/89yhyBsqh+HU9fM1Aws0xMX0c+HiHrfLwwUisemrrBNXJHlaY40pS02UjiCbp/wyC74mTbbVvlLdCr1fNEEdsiLzmWDc00HR+beOOuaCBEHUP+Xt5GkIypic13vek1gXPlW1oMTMS/L45tivpNM06//Mx41Egi4W0HoUnGRb/08AmRhtIhPswoSxZfIJZyHElDEorUOkQFML5NIWzurPUxorYbntt/rr/ZeY0/mfCKQIbsFznYDFUhI6EfrcKwgGTsimnZz5Ab124ZCeCr+kM4ryBWXu+Ttb5r1DeTCbC0iYr0QrLMArXheUqBiO18nEWtgJftB0hLRe+Viz+vE1xbZAP+I2o2nypbLEKqpNXJ6HTy2CoVOxu7IWeHEItJsAZZFXEmGtRcZhfVpjLbMpGK40YDQt+6IJO88b9F1FV9dq9XXGNAX7pF/rbU3IA="
  # CODECLIMATE_REPO_TOKEN_DEV=[secure]
  - secure: "Lm/TJP0uLwE5MklA8Dg0TLgX06Wzgy+betqygD9uQ2a2yznx7thVqHK9sGzEcKtvCi7hJ8nojN0H0uBNCux/UJK4DARxfHdAg8iVbKYTVOLqTmYkXNdC9NlG+4fvo2MEEiMOzG7HzJ0lpb9w3Zp3KCJ55nW4l9LQNjhWXkMHv1KXdfXMFpxahnq6eZpuIUyWZgGqn0V3Dg+Fi3/aTWtWafCr+CVRBn8FzohEG8sc4Rkgy2/kNaVLIkrZvQeFv8BTThwXbmcCwLr2y8SOltfYa2FKC3DEOu4gq0fC9ztppRtyDs+BvdYYR5z76KbB5iLwV+KRxg1HP+i6v70z487crAs+NHeE9d3Jyh2FzfAFjspr5bilxMS/uDrnQcQAUu8BG6m4ZZII1CCu39ueNrTHJc35QgfB6vOreh6uy6YGne1DAx5lPzqQGgWDMY1a7xXsTArdpURW246kLzOAUZcMno0UHt3NCTSWMQftidrGi6KqpfQIin5A5ftaUZnS4IS76Ijqu8NN5OavJ6jXJUPLC0TNcZ0y5Hw4A+VUg0J8yO1hlJbkvV1tYHqlWxtZo/aTwXyTRHXzgCh6c8vCKA53kU43/2tZA85mkRhaTSA4PqotT6N+PRQGvXIQyaCMWUW2ZAUKJESei2ApIR3ihc+h3J8TAzKW2phKJhH+W7YXQsw="
  # AWS_ACCESS_KEY_ID=[secure]
  - secure: "hWjzVcGhkVFo8cgnsjrdu38+G0ZpW476UsMui+FHN/fJ2PvSv4GQh+F9fBmlLgzJakq/8QZ1F0cbrl5VMPGkhdSNXXF6Y13/UKhPoKoIl/8mMkiB62sioBNMHnB8LF1QRi4XqSAzEdodkuEUQkgnq3Z8jWlEe+UwfpXy9cpJSYA87VXeKm7DUrD6cQH/ennEaalZZ1dd9BiGJJE4KrQWY8TEaY32ijN2cBq4/UAv1N5nV4mXXN2jtwkzgJiIhDEmJh3svOc09tRE5zpNOwRzohng6oFFtcIWURcTEsAYTPKGsR3d3QMyUb5pVGtCqIFzzQPhcn6/t7BZLRt6k8+RG7y+/2QvRS9pj9RiQ3fc+L2RGRQmIQ4qwbpo5pjBHUoI9bvJzecx1CNRVfyVcLUjsy8dvi3e7RXbWbbiRxiQ07HDMU2BIZ3BtBy/+vbjdfmW/IN3hN9muBYOupZvwCKxB2gIOw+nUqeKuMtrmz6MVWbTeLRzOXZHItLWfdsNPianZeHQg56OBIe5ui+nZ+Vhcn3GJAn+yTLESHUHllOYEgAEEQFUcTD2GrtJPjvn7ABTiBrxRH3x3M/cd3NB80y7MZmj4hKYlciUPcN8WVxNwwWkbrRuIvnIp3PTKkulv+ZVd9o0PqJob7kJITx/+xXpuwBXIxYlWChfUvsiAGUFBQQ="
  # AWS_SECRET_ACCESS_KEY=[secure]
  - secure: "bLDg9gOGm23CRN9qkTAopC3fKQ6BDM6vaQvtUsuAe9iA6DJc3an5l00eHeOieF90gS9dHwTsk9MgRn9vQbC9YSiNoIJmCjXZYB4dAde/qmGiDluIzwXjavvC03Rc/kbqEydDiUBacgCKPVmsMkBBiuusPnXvh9U0wpOuN0Vm1ogP/ypEzB6lMGJ8Q72CtqTie7gce72IZsMF/2HbcujNbkxTV9YNX58z3h8YD9PEY+2kG3TGAhLdM0c1uXZQ64RF84X+zhR+ee+ZV7Bqm71m6ekknRQ/HlO0GMCa6Sd4qntpHWfb/GWgOIa8BjEvGH3W3lAcn5qSwToJk/Nj707dXdYreMCHFQjWwyOT2euPFXMTDrhY/ws+ZwBpZ5PdULqqqtcmC+OXNlulPJjX6v6kMA6zR3Z4ov0LeC/YGeO42z06ryauj2FkONgCMK3NccDWOQMQ6rhnSTv2r96IrRjjjSZTB7CD3I3CHzxm/M+0eW55ss1YY8oZ9MyPXp4U4x9T7ikB0byJhnkcOnVKiOqD5L6oML2oMBaNCC6njdFXJaIVEYy8Rmmx79li9ZXqGJSkWtb0dO8hll7IFAKZ2CbJeQp5ZXAQxBimaXBSefE0WZGgKlNM9loPfM5IBoEdgs+8jPo9E1IyRi9uD1VsOcXiUV4+8tZnwCozvI7D6gpW+IQ="
  # AWS_DEFAULT_REGION=[secure]
  - secure: "wJ/q1NSgY3H7nXIg7kZUT9QrpwPMs384JP4+W2hapsxAfltEDTGbqgmtPOffTk5olkvD797bj9pEmkVpzAE+QshskOT4do3nGOe3kR3AAAiIFwF3gZJzc7rQ8Xhwo5NDI9tdBVAiFBBkXAe+EHLLPfzNx0r7lpTmVtr4rWIxNyVbipdHE9g4UCLGrV2RJun1X+m2nt1Nnp86gMpu1Sk2S0cT0BbpALerRacmAG3x5hsGYimNpxpOKUUrbhYYw1pMfP+orX/o7Ns1hH6+qvLrw8yUR7zvxioqfhMWT401xu1wp1K7qxk9qUjOuugsXnMQf+xJtrx8ZrMvnD7bnefeqpQDuHagKxil1+Xkueqxt1D/FJOmDWMNNjM/6KnqJlkAsEoRNIt6WM37IoCGCxri2cR4gw3Fcmxnoxnfw5ki34k9cI0bQSuRJl7bvV9srv1YUMJ1DnhkAqP6xxfGrp+ObFq2nmuZV0n6E1lMdf+gk2PwOiBjuCDILFvb5qycTZaH9APQInE3qJffGIZ1oIXICO7BFJXFRAgj2/6AFNPaQluq66qbzPS1/x5k29yzqOGrChzz0JKe4PfT7gi7dEbXAg/3ORqCu4ygFHndJqqRLoTwcu2EsWxPuXoct6D9NoNdlC3O2TTIA5Hjy+Sxr/xDcJjqaEhqEZOYvdNbLnRVq9U="
  # AWS_S3_BUCKET=[secure]
  - secure: "UCHV11M07MABHxJjRnabmoMdy1AHV1P4g69wk33NTF0YIkN4VjCrLuhWAPP/T/9dVRyHa0gxVn4ZuShXVfqJPOe+draLgP/vTGLYWAknV5JUT4LtszlcrQN9SpG28AKBVyvi2H28sEZMHzdYknfA3vPLScYEd9ja8ZNMrGT+aTqxzL4l4BjK7r1jlQjtamhLbWoHzyZBlbHF7ZyOTbKQpbomYHUy0yXgXMBtK/HV2mO8ICu/07ubl2yk29yhMrLMFH5zBLopBBT6s2GfGT4kUDY5PdAOx/i41/X9sNKmNgWgjv4Bc+cyJ5moGnmB/+g6gGGK6ow/3hZqHS3N/TI2vwKGVAolPOrvSQep3Ku4FtCwpLemy00SItCM+Qv2h00T2UPDfDYrwO2VOX9R4XCpip7JW6BnBX1MEMA2MQOU3XgRbTo1T+25jc0uUljd8EOZPflaZN7IBa/N+u+y+b/hegUFCYc06hwAcHPQAwk1ySgnm0VUeC3vMux8LdObtrjUcT+i47/Vt+oSeFssqXg8dhbS8FsBMXTpGsJJ96Nf3/p7TLmVEvMasw/8O4ynJ6EJvanMRLbcQDwCoY+UGOomHvxXNgxLBGRtAaswJnS+Quz7Mv9pEZaevN3ngluPpcMRLXH/B4fopkyo5MfC4lXsG6hOsXQ9Lj/dY/B1Rpx/d1E="
  matrix:
  - TEST_SUITE=backend
  - TEST_SUITE=frontend
notifications:
  slack:
    secure: "k35wRcSW/s7lm7wG51gZCYNmX9hreBRBPA421J+IkQ8eGUOX6zXRe8k28oHxODdk7EyNx0ByAyMPfZv+wYwARnKLmfJLfEQ3dLxyPIqkVdw5IgaVPBsQEjzwiZXUwXHqKd7hQHseA8jG+t9TkxjVpkl0C/SMF5B1dy7J32g+PTcqgvloBMbdSfIAAGFLj5LlwJPiIxeGbdeaGguGCVIas/zlGnFMbRbARabYXdauMMM24lmPzMx2TaPGZ9qFajdf1MnnvemSE8eurqdgzBe6oTAJttrUFqfCGa9x2V4kKuRcvaDfhVL56kveLuOpmEYA2m0GvfPoHb91BDomkc+hH6KuKGHI2ZX6GTppHr1YM9M/9xmVoghfjdM2N9QcL23Gu/OC76gt8wsxYnncmhEWeDPJV0dvSibQIyItwIieEWKLATtrj0krYoaWv8Zub3c7Qetz/rEsSHi9mLNAoL4Axksn3MVg2ikYU6xCbhr/epuwjZxQiM8RjLpoQvTbMLzSv+0BZOWY4CvEb7pq93hMSHtVz45oX1hdB0dRZB+6I1WiyoirPBss/aRUzkCL6adaBQbUJLDey/md8i+MDYV0qEHE7yTU1wm7RdQ84UK1zRjL8APb2jJHm3Aq7iK4OEWYt2shRdZNJ092iXhGbo/Tj0n7aCyuv1kY4zWm7+RPevg="
