language: node_js
sudo: required
node_js:
  - '4.3'
  - '7.6'
cache:
  edge: true
  directories:
    - $(npm root -g)
    - node_modules
    - deep_modules
    - $(npm config get prefix)/bin
branches:
  only:
    - master
    - dev
    - stage
    - test
before_install:
  - cp bin/test/package.json .
after_success:
  - npm run coverage
after_script:
  - npm run remove-coverage
env:
  global:
    - MAJOR_VERSIONS=master
    - DEEP_NO_INTERACTION=1
    - E2E_TESTING=none
    - secure: 
        P3w5cxxOSFIDFsMeJYuDa1STEOFhRd4RaaZkXj48a2MLONNo/6WmmfrZJAXIyvPc/mIAdYt6pPEGED3SEFmqcePdLOymQVnhrTC47if5DIyujZwD1CRoHHY6PzXirG3pk3V0fWuTU/JMD2OvjV4mhpLlgfJFxS9VXFioYUHh7sOp74sD0RT0ZQ0XY26lJfqOLLK3nh9YEJaPY9sQitfmYNSdpLC5kPL7EnKppogipaMp+mnSjNA4lERlAaen5YWpusQ8poXjRqPoDUOQRiQoHoGRR0B/q+VqsQAqLubmXdGAHxANHnRTVKFTQpSZVYFyTrzqquodbQI4H5gYnV6vKO9/L6/NAYDjNNFMZO2znhNkjfRM28fClpFooOY4AUEbZMxBCe6CsaPjuBKqdPWKfY1oAxA30mk9R/1v30gaXOHgBvbXFvQpc8JTTcXeIxX4fodZqcoB6/natxOxcMBXl5+/n2jI1AoksmRyfwJVJyA0FLpQQYZMifKFvr5Ise9qj61d65cJAXtKVn+zp5CBTF1Kbpuu50SE+e+lwCPp4Udu4xybknPaP0jdlv6jI+HpJ43cUGMcH5XU7mUG+4SdxesyirUimL9rOrQw1rKt8etNftzCavYE0/GUNdWq95sydMiQI5uUk3yFCGY69mxzVsCZh+WaEuWkR/A5yOE+JYU=
    - secure: 
        fFrWdaJS5uH2TzMp+OaG5lCq0d5472C3eNquMnCmWnzjuKRWMxJ6auMKhTLujorI/4n1iYjyomU7yLfPLMrlwSEzT44i53QCjK3nVzY1tJKW+dncrK82qpHu1+JqHLAMdC22OcO7dNC1Aw03lxls1OtKr1hSvCGcRHaUfdzRqlU3kEH2fcAOsxqf6TwHeUHt7+GOHe8smKkc7GMCX23hcqFkivFCQ7tclWXb7KOHX+vJgpGHGfaITq21p/VTuqTM3pb0OVgLsDcwz+T1RTpYYgKZmLmECc9QarofbCzyisXhJHRfK3vTYL4IrMzd8eh9JruCLGfA36g7mp9Y2p7uG2qvR5SkuKGoM71vATu5fEaFzCaw6Iw/V5vrEGXVNyi/bR1eJ/F5B5cAFLNVAT9lUVKGndNSl5wWjMgxbKR5iB5znlvyc64I4ZYPTRlbRaBhgGZyEqC4H4oVqMrwX6jefDTdqimbOcLHn0z17lMLbl+olsWV4ZnMOcSCI4OlGsgEOZF4g3QHlVht2tIF5p8Q97qe2wwpWaW1WrHedEqg8xpMjsbTfMlK03ydkPj9jGGH+7eUMH4jRiqy3fA1vXuoSsC/pejn0a+YZo+ISLShn+E6jodRMgZm2SGiMHMtfkCXZBh6MXO2s2JPQbptl1/JslgO/kBc6MNOSE65rLMwaCA=
    - secure: 
        Xz3PXjwfejFnNonzzgJfzGTgVQeWG8sb0/XMVpqPnyYo5orC3ZX5jcpM4+O4UjVazRRcQ1WQSi5wysgZT3mVWFGXBQ01bvGhVXqpjYswRRi69yGpponJWUW7zWtWClW4bdcF+/ts2ejtsNYRUjA3gzOnWti3qLlF7OjovL/PWjDagr1o6P5cu2L046K/XvDZp86t1FWn/wgDwHyOsYFHC7AhjljGJtA6KvXVpnclPbvTHJT1HGpdMv8OYaZhCCuMBaRAdVFUbZ9jg6cZQlPfc+CdjXggXFa71BwWFiU6kBsvdVqWInkVRWevz4mp0F/cd9eG4Nyyi4fCd+l4CpZIAleJSoNtvhqDoP702MBtmLdm+E2wcRr6D7+gm2e2qlt1HYbbiGTbf79QtdfL3Pkxs25km4soSrrcny1tsiX37y4LL+GsAoLfn2AcgjThqWp5xgsrpd4cyBxdKORoGY3hPyhrD7TQ+WMpQLw4feMwAdIaScl5vpF76V0egvdPSIhQ7oRWrJoOFmBH0VT0aEQCA/HILhJJ9YVDvG2MFjzphR0JyxV+gHg3/XbEKmI2Og6rDT2hA0/S2hNU2cVKhx4n5vWJCOxewQijh00WSVFIDSWT6hjmy74eps3hVMcrckt4ThYfVEtowLJqkARZFGxHinUSvBpSKfYBr52xozjtZGQ=
    - secure: 
        pr2jS9p2G3tl/YxRifACa5gUAC5eIDpQ53Jjo0TeQ7lWmqjykAqI6vpby+9QAnfgFRvkWtquCLtgBoeABuEtxY7oG3rmjrmGRGt5OqwaOO+Bi+tBP0pSu5y7w3LpMaseqfJJ/g9hl9nLnVHsmr2Qwq47nllfn6SSC16A8h+h38unSx9lpDU0q0RLu1LSm4HvyX2fdUIxCqWfUF2AIixwdYJg5SnIHcJErNHy/tVvQmm8BJ/mgo7JgV/MbmHCTbryuw1dD16o2290F4rHL0Wq6pLQ+1IsFLmLrdX13CLDMwtXr4H3k7R+pssvhlP6UPmsFhnrV4ADgGpMUtWilMwNsYICHh/MXI3qxGzTfQGTEmA+F1QT/O3TisUugYi8901PXzNbh+kVODlCMkWXd6VKyYAbPJlwwtTBq4urkJzvbhgHIrHFUyjkVhW9UO4jP8Cz0uDsRouaU/uK6AG+uzGSDL49JK16PWhu707rHOzzYjDkPvcImH0YIMbGFTKnbJ+XVXriapEMsdA3MN0s1s5h2UqKhAih49qZRetcBzt9P2+QSE5CAj1E8/2kMdyHCK/jPvIREgHMF+kRhYUfH9Atur6RQwKncqur4jdB8k/bzAQ3QjUY7RizXL6sSRjiXeocUoU5LgdY/oOkqBJhNpS73Y+EUQwqhvwJz4b4f9fpTHY=
    - secure: 
        l6XGXAARrFwvNTs+dtO5ggtG/m+oPd+djPKd75VAVI1qojNSlYoqHMG3qvAadSj09oq6lkpvNEuqsJV8ZY9HyYDBx/Ix69v952U1teBUGVeiPX9E2ikt8zqlKZqtsLuktXb6NE8RQN1kWT0jstVP/U/fQ7FxJoI9jJrllpKnC7rWz43Xi1RygdNV7trG7PjhaHXqWz1gKxuF1COQ8qAOw4NxAdujni0150ImMxI4PrdETyzhlgw6fq8rKznensGwf6ZGxll5+zISWwXpiUgsxBG1yd7L88JNIU70YHC/ReH2QL0xJqxLhMMhTtOff+gL1/BhkgUTyD2sEfeIdjpX3HO8GPkGaL5lbQPTMiM4XySSAM+SVjNZdRSr03psEm/x6g8gEVEvM+zm5Q8n4e3cwpG9bSlxWQIrd7E1NF1AodlI/wwlWbLlrAQ5nrm215HrUvPqKVcRkKiVlCWfAtrEbTtu3QLrpaV+OfTl0hLFL8GVYlihIqIlA5ay9h+MU/RdnBrWlDtyZvLZ7fCKwp/VZQcj9Sp4oNOBnDetrZh4f/LWi6B0kbYinLx9s/vrde08DrC+UXlDN4Feaem3prAIFaeRPuTRvSa6SPRKx/G8F38/IJoIn9yl06wfJeBKrcvRVO3Cvzi3asNrRd/EpSH1zRd0k6aZag8kXP+J3DtX3uA=
    - secure: 
        rlQJxVn/ckgMICKNQ227/k9VDiuLKevPbEEruPG5BmXafEgOKMNNDJ/7BVzJ6TI+6YMVXGFjOqHDbBJzw8kHyb+pze49NFqqRXqmGRVaWMq+BZ58QR7+ilJyRNa9lO/NxNc77Y3iNLoa19hNtxCCjKCpcytYq3nDQA+tNn0zKC2QY6Njrvjptna9KEYHz/fj41RVVsbTzs7dnfa6Q4GSp1+Ti3IWkKxBiMY96EbNRO5wv/89yhyBsqh+HU9fM1Aws0xMX0c+HiHrfLwwUisemrrBNXJHlaY40pS02UjiCbp/wyC74mTbbVvlLdCr1fNEEdsiLzmWDc00HR+beOOuaCBEHUP+Xt5GkIypic13vek1gXPlW1oMTMS/L45tivpNM06//Mx41Egi4W0HoUnGRb/08AmRhtIhPswoSxZfIJZyHElDEorUOkQFML5NIWzurPUxorYbntt/rr/ZeY0/mfCKQIbsFznYDFUhI6EfrcKwgGTsimnZz5Ab124ZCeCr+kM4ryBWXu+Ttb5r1DeTCbC0iYr0QrLMArXheUqBiO18nEWtgJftB0hLRe+Viz+vE1xbZAP+I2o2nypbLEKqpNXJ6HTy2CoVOxu7IWeHEItJsAZZFXEmGtRcZhfVpjLbMpGK40YDQt+6IJO88b9F1FV9dq9XXGNAX7pF/rbU3IA=
    - secure: 
        Lm/TJP0uLwE5MklA8Dg0TLgX06Wzgy+betqygD9uQ2a2yznx7thVqHK9sGzEcKtvCi7hJ8nojN0H0uBNCux/UJK4DARxfHdAg8iVbKYTVOLqTmYkXNdC9NlG+4fvo2MEEiMOzG7HzJ0lpb9w3Zp3KCJ55nW4l9LQNjhWXkMHv1KXdfXMFpxahnq6eZpuIUyWZgGqn0V3Dg+Fi3/aTWtWafCr+CVRBn8FzohEG8sc4Rkgy2/kNaVLIkrZvQeFv8BTThwXbmcCwLr2y8SOltfYa2FKC3DEOu4gq0fC9ztppRtyDs+BvdYYR5z76KbB5iLwV+KRxg1HP+i6v70z487crAs+NHeE9d3Jyh2FzfAFjspr5bilxMS/uDrnQcQAUu8BG6m4ZZII1CCu39ueNrTHJc35QgfB6vOreh6uy6YGne1DAx5lPzqQGgWDMY1a7xXsTArdpURW246kLzOAUZcMno0UHt3NCTSWMQftidrGi6KqpfQIin5A5ftaUZnS4IS76Ijqu8NN5OavJ6jXJUPLC0TNcZ0y5Hw4A+VUg0J8yO1hlJbkvV1tYHqlWxtZo/aTwXyTRHXzgCh6c8vCKA53kU43/2tZA85mkRhaTSA4PqotT6N+PRQGvXIQyaCMWUW2ZAUKJESei2ApIR3ihc+h3J8TAzKW2phKJhH+W7YXQsw=
  matrix:
    - TEST_SUITE=backend
    - TEST_SUITE=frontend
notifications:
  slack:
    secure: 
      k35wRcSW/s7lm7wG51gZCYNmX9hreBRBPA421J+IkQ8eGUOX6zXRe8k28oHxODdk7EyNx0ByAyMPfZv+wYwARnKLmfJLfEQ3dLxyPIqkVdw5IgaVPBsQEjzwiZXUwXHqKd7hQHseA8jG+t9TkxjVpkl0C/SMF5B1dy7J32g+PTcqgvloBMbdSfIAAGFLj5LlwJPiIxeGbdeaGguGCVIas/zlGnFMbRbARabYXdauMMM24lmPzMx2TaPGZ9qFajdf1MnnvemSE8eurqdgzBe6oTAJttrUFqfCGa9x2V4kKuRcvaDfhVL56kveLuOpmEYA2m0GvfPoHb91BDomkc+hH6KuKGHI2ZX6GTppHr1YM9M/9xmVoghfjdM2N9QcL23Gu/OC76gt8wsxYnncmhEWeDPJV0dvSibQIyItwIieEWKLATtrj0krYoaWv8Zub3c7Qetz/rEsSHi9mLNAoL4Axksn3MVg2ikYU6xCbhr/epuwjZxQiM8RjLpoQvTbMLzSv+0BZOWY4CvEb7pq93hMSHtVz45oX1hdB0dRZB+6I1WiyoirPBss/aRUzkCL6adaBQbUJLDey/md8i+MDYV0qEHE7yTU1wm7RdQ84UK1zRjL8APb2jJHm3Aq7iK4OEWYt2shRdZNJ092iXhGbo/Tj0n7aCyuv1kY4zWm7+RPevg=
